apiVersion: v1
kind: ConfigMap
metadata:
  name: jopper-config
  namespace: default
  labels:
    app: jopper
    app.kubernetes.io/name: jopper
    app.kubernetes.io/component: sync
data:
  # ============================================================================
  # Joplin Configuration
  # ============================================================================
  # Joplin CLI running in same container (localhost)
  # The Joplin CLI exposes the Data API on port 41184
  JOPPER_JOPLIN_HOST: "localhost"
  
  # Joplin Web Clipper API port (default: 41184)
  JOPPER_JOPLIN_PORT: "41184"
  
  # ============================================================================
  # OpenWebUI Configuration
  # ============================================================================
  # OpenWebUI base URL (with protocol, without trailing slash)
  # Examples:
  #   - In-cluster: "http://openwebui-service:3000"
  #   - External: "https://openwebui.example.com"
  JOPPER_OPENWEBUI_URL: "http://openwebui-service:3000"
  
  # Knowledge collection name for display purposes
  JOPPER_OPENWEBUI_KB_NAME: "Joplin Notes"
  
  # Knowledge collection ID (REQUIRED for proper organization)
  # Get this from the URL when viewing your collection in OpenWebUI UI:
  # https://your-openwebui/workspace/knowledge/<COLLECTION_ID>
  # Example: "ab3e1c1f-3ef7-4ad2-9c5d-144538056ddb"
  JOPPER_OPENWEBUI_COLLECTION_ID: ""
  
  # ============================================================================
  # Sync Configuration
  # ============================================================================
  # Sync mode: "all" (sync all notes) or "tagged" (only notes with specific tags)
  JOPPER_SYNC_MODE: "all"
  
  # Comma-separated list of tags to sync (only used when mode is "tagged")
  # Example: "work,documentation,public"
  JOPPER_SYNC_TAGS: ""
  
  # Sync interval in minutes for daemon mode
  # Default: 60 (sync every hour)
  JOPPER_SYNC_INTERVAL: "60"
  
  # ============================================================================
  # Storage Configuration
  # ============================================================================
  # Path to SQLite state database (tracks synced notes)
  # This should point to the mounted persistent volume
  JOPPER_STATE_DB_PATH: "/data/state.db"


